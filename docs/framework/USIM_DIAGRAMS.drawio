<mxfile host="65bd71144e">
    <diagram name="1. Ciclo de Vida USIM" id="cycle">
        <mxGraphModel dx="417" dy="674" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title1" value="CICLO DE VIDA USIM" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="400" y="40" width="300" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="init_title" value="1. INICIALIZACIÃ“N" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="80" y="100" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="client1" value="Cliente" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="80" y="140" width="120" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="arrow1" value="GET /screen" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="client1" target="service1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="270" y="170"/>
                            <mxPoint x="270" y="170"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="service1" value="AbstractUIService.buildBaseUI()&lt;br&gt;â†“&lt;br&gt;UIStateManager (cache session)" style="rounded=1;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontFamily=Courier New;spacingLeft=10;fontSize=10;fontColor=default;whiteSpace=wrap;" parent="1" vertex="1">
                    <mxGeometry x="340" y="140" width="230" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="arrow2" value="JSON UI" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" parent="1" source="service1" target="client1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="270" y="200"/>
                            <mxPoint x="270" y="200"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="json1" value="{&lt;br&gt;&amp;nbsp; &amp;nbsp;components: {...},&lt;br&gt;&amp;nbsp; &amp;nbsp;storage: {...},&lt;br&gt;&amp;nbsp; &amp;nbsp;modals: []&lt;br&gt;}" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Courier New;fontSize=10;spacingLeft=10;" parent="1" vertex="1">
                    <mxGeometry x="584" y="150" width="180" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="event_title" value="2. EVENTO DE USUARIO" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="80" y="270" width="250" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="client2" value="Cliente&#xa;(botÃ³n click)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="80" y="310" width="120" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="arrow3" value="POST /event&#xa;{storage, params}" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="200" y="340" as="sourcePoint"/>
                        <mxPoint x="340" y="340" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="service2" value="initializeEventContext()&lt;br&gt;â†“&lt;br&gt;onEvent($params)&lt;br&gt;â†“&lt;br&gt;UIDiffer.diff()(oldUI â†’ newUI)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontFamily=Courier New;fontSize=10;spacingLeft=10;" parent="1" vertex="1">
                    <mxGeometry x="340" y="310" width="230" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="arrow4" value="DIFF" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="340" y="370" as="sourcePoint"/>
                        <mxPoint x="200" y="370" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="json2" value="{&lt;br&gt;&amp;nbsp; &amp;nbsp; components: {&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;btn_1: {text: &quot;Guardado&quot;}&lt;br&gt;&amp;nbsp; &amp;nbsp; }&lt;br&gt;}" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Courier New;fontSize=10;spacingLeft=10;" parent="1" vertex="1">
                    <mxGeometry x="584" y="320" width="230" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="apply_title" value="3. APLICACIÃ“N DE CAMBIOS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="80" y="440" width="280" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="renderer" value="ui-renderer&#xa;diff.each()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="80" y="490" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow5" value="updateComponent()" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="200" y="510" as="sourcePoint"/>
                        <mxPoint x="340" y="510" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrow6" value="applyChanges()" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="200" y="540" as="sourcePoint"/>
                        <mxPoint x="340" y="540" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="dom" value="DOM Element&#xa;(actualizado)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="340" y="490" width="120" height="60" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram name="2. Arquitectura General" id="architecture">
        <mxGraphModel dx="513" dy="674" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title2" value="ARQUITECTURA GENERAL USIM" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="370" y="20" width="400" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="http_arrow" value="&lt;font style=&quot;font-size: 12px;&quot;&gt;JSON/HTTP&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fontSize=14;fontStyle=1" parent="1" source="frontend_box" target="controllers_box" edge="1">
                    <mxGeometry x="0.0958" relative="1" as="geometry">
                        <mxPoint x="570" y="219" as="sourcePoint"/>
                        <mxPoint x="570" y="259" as="targetPoint"/>
                        <Array as="points"/>
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="services_arrow" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3" parent="1" source="controllers_box" target="services_box" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="540" y="360" as="sourcePoint"/>
                        <mxPoint x="540" y="390" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="BIjn1Z4AEju04GT3t9Pa-3" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="390" y="250" width="360" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="controllers_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;" parent="BIjn1Z4AEju04GT3t9Pa-3" vertex="1">
                    <mxGeometry width="360" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="controllers_label" value="CONTROLADORES" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="BIjn1Z4AEju04GT3t9Pa-3" vertex="1">
                    <mxGeometry x="100" width="150" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="uidemo" value="UIController&lt;br&gt;&lt;br&gt;Ruta â†’ Servicio&lt;br&gt;Servicio â†’ JSON" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;fontSize=10;spacingTop=10;spacingBottom=10;" parent="BIjn1Z4AEju04GT3t9Pa-3" vertex="1">
                    <mxGeometry x="20" y="30" width="150" height="55" as="geometry"/>
                </mxCell>
                <mxCell id="uievent" value="UIEventController&#xa;&#xa;Evento â†’ Handler&#xa;Diff â†’ Respuesta" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;fontSize=10;spacingTop=10;spacingBottom=10;" parent="BIjn1Z4AEju04GT3t9Pa-3" vertex="1">
                    <mxGeometry x="194" y="30" width="150" height="55" as="geometry"/>
                </mxCell>
                <mxCell id="BIjn1Z4AEju04GT3t9Pa-4" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="390" y="80" width="360" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="frontend_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;arcSize=9;" parent="BIjn1Z4AEju04GT3t9Pa-4" vertex="1">
                    <mxGeometry width="360" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="frontend_label" value="FRONTEND" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="BIjn1Z4AEju04GT3t9Pa-4" vertex="1">
                    <mxGeometry x="130" y="2" width="100" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="blade" value="app.blade.php&lt;br&gt;&lt;br&gt;Contenedores&lt;br&gt;HTML base" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;fontSize=10;spacingTop=0;spacingBottom=10;verticalAlign=top;" parent="BIjn1Z4AEju04GT3t9Pa-4" vertex="1">
                    <mxGeometry x="20" y="40" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="ui_renderer" value="ui-renderer.js&#xa;&#xa;Motor de&#xa;renderizado" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;fontSize=10;spacingTop=0;spacingBottom=10;verticalAlign=top;" parent="BIjn1Z4AEju04GT3t9Pa-4" vertex="1">
                    <mxGeometry x="130" y="40" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="ui_components" value="ui-components.css&#xa;&#xa;Estilos de&#xa;componentes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;fontSize=10;spacingTop=0;spacingBottom=10;verticalAlign=top;" parent="BIjn1Z4AEju04GT3t9Pa-4" vertex="1">
                    <mxGeometry x="244" y="40" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="BIjn1Z4AEju04GT3t9Pa-5" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="390" y="380" width="360" height="310" as="geometry"/>
                </mxCell>
                <mxCell id="services_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;arcSize=4;" parent="BIjn1Z4AEju04GT3t9Pa-5" vertex="1">
                    <mxGeometry width="360" height="310" as="geometry"/>
                </mxCell>
                <mxCell id="services_label" value="SERVICIOS Y BUILDERS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="BIjn1Z4AEju04GT3t9Pa-5" vertex="1">
                    <mxGeometry x="70" y="4" width="220" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="abstract" value="AbstractUIService&#xa;â€¢ GestiÃ³n de estado (cache)&#xa;â€¢ Lifecycle de eventos&#xa;â€¢ Diff automÃ¡tico&#xa;â€¢ InyecciÃ³n de componentes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=left;spacingLeft=30;fontSize=10;spacingTop=0;spacingBottom=10;verticalAlign=top;" parent="BIjn1Z4AEju04GT3t9Pa-5" vertex="1">
                    <mxGeometry x="55" y="40" width="250" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="uibuilder" value="UIBuilder (Factory)&#xa;button() â€¢ label() â€¢ input() â€¢ select()&#xa;checkbox() â€¢ table() â€¢ uploader() â€¢ modal()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;fontSize=10;spacingTop=0;spacingBottom=10;verticalAlign=top;" parent="BIjn1Z4AEju04GT3t9Pa-5" vertex="1">
                    <mxGeometry x="55" y="140" width="250" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="component_builders" value="Componentes (ButtonBuilder, InputBuilder, TableBuilder...)&#xa;â€¢ ConfiguraciÃ³n fluida&#xa;â€¢ SerializaciÃ³n a JSON&#xa;â€¢ IDs determinÃ­sticos" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;fontSize=10;spacingTop=0;spacingBottom=10;verticalAlign=top;" parent="BIjn1Z4AEju04GT3t9Pa-5" vertex="1">
                    <mxGeometry x="55" y="230" width="250" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="builder_arrow" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2" parent="BIjn1Z4AEju04GT3t9Pa-5" source="abstract" target="uibuilder" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="150" y="100" as="sourcePoint"/>
                        <mxPoint x="150" y="120" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="components_arrow" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2" parent="BIjn1Z4AEju04GT3t9Pa-5" source="uibuilder" target="component_builders" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="150" y="170" as="sourcePoint"/>
                        <mxPoint x="150" y="190" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="BIjn1Z4AEju04GT3t9Pa-6" value="" style="group" parent="1" vertex="1" connectable="0">
                    <mxGeometry x="270" y="710" width="610" height="87.5" as="geometry"/>
                </mxCell>
                <mxCell id="support_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;arcSize=8;" parent="BIjn1Z4AEju04GT3t9Pa-6" vertex="1">
                    <mxGeometry width="610" height="87.5" as="geometry"/>
                </mxCell>
                <mxCell id="support_label" value="SOPORTE Y UTILIDADES" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" parent="BIjn1Z4AEju04GT3t9Pa-6" vertex="1">
                    <mxGeometry x="210" y="7.5" width="220" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="idgen" value="UIIdGenerator&lt;br&gt;IDs Ãºnicos" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;verticalAlign=top;fontSize=10;" parent="BIjn1Z4AEju04GT3t9Pa-6" vertex="1">
                    <mxGeometry x="10" y="37.5" width="110" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="differ" value="UIDiffer&lt;br&gt;DetecciÃ³n deltas" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;verticalAlign=top;fontSize=10;" parent="BIjn1Z4AEju04GT3t9Pa-6" vertex="1">
                    <mxGeometry x="130" y="37.5" width="110" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="statemanager" value="UIStateManager&lt;br&gt;Cache de estado" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;verticalAlign=top;fontSize=10;" parent="BIjn1Z4AEju04GT3t9Pa-6" vertex="1">
                    <mxGeometry x="250" y="37.5" width="110" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="changescollector" value="UIChangesCollector&lt;br&gt;RecolecciÃ³n cambios" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;verticalAlign=top;fontSize=10;" parent="BIjn1Z4AEju04GT3t9Pa-6" vertex="1">
                    <mxGeometry x="369" y="37.5" width="110" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="eventdispatcher" value="UsimEventDispatcher&lt;br&gt;Eventos cross-service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=center;verticalAlign=top;fontSize=10;" parent="BIjn1Z4AEju04GT3t9Pa-6" vertex="1">
                    <mxGeometry x="490" y="37.5" width="110" height="35" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram name="3. Clases de Componentes" id="components">
        <mxGraphModel dx="417" dy="674" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="arrow_select" value="" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;elbow=vertical;" parent="1" source="select" target="abstract_comp" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arrow_modal" value="" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;elbow=vertical;" parent="1" source="modal" target="abstract_comp" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="title3" value="JERARQUÃA DE COMPONENTES USIM" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="320" y="70" width="450" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="abstract_comp" value="AbstractComponent&lt;br&gt;&lt;br&gt;+ id: string&lt;br&gt;+ name: string&lt;br&gt;+ type: ComponentType&lt;br&gt;+ visible: bool&lt;br&gt;+ enabled: bool&lt;br&gt;+ toJson(): array" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;verticalAlign=top;spacingLeft=10;fontFamily=Courier New;fontSize=11;" parent="1" vertex="1">
                    <mxGeometry x="445" y="120" width="200" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="container" value="UIContainer&#xa;&#xa;+ title: string&#xa;+ layout: LayoutType&#xa;+ padding: string&#xa;+ children: array&#xa;&#xa;+ add(component)&#xa;+ remove(id)&#xa;+ centerHorizontal()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;verticalAlign=top;spacingLeft=10;fontFamily=Courier New;fontSize=11;opacity=80;" parent="1" vertex="1">
                    <mxGeometry x="100" y="520" width="200" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="arrow_container" value="" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;elbow=vertical;" parent="1" source="container" target="abstract_comp" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="button" value="ButtonBuilder&#xa;&#xa;+ label: string&#xa;+ action: string&#xa;+ style: ButtonStyle&#xa;+ icon: string&#xa;+ tooltip: string&#xa;&#xa;+ onClick(action)&#xa;+ disabled(bool)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontFamily=Courier New;fontSize=11;opacity=80;" parent="1" vertex="1">
                    <mxGeometry x="790" y="520" width="200" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="arrow_button" value="" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;elbow=vertical;" parent="1" source="button" target="abstract_comp" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="input" value="InputBuilder&#xa;&#xa;+ label: string&#xa;+ value: string&#xa;+ type: InputType&#xa;+ placeholder: string&#xa;+ required: bool&#xa;+ error: string&#xa;&#xa;+ validate()&#xa;+ mask(pattern)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontFamily=Courier New;fontSize=11;opacity=80;" parent="1" vertex="1">
                    <mxGeometry x="560" y="340" width="200" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="arrow_input" value="" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;elbow=vertical;" parent="1" source="input" target="abstract_comp" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="table" value="TableBuilder&#xa;&#xa;+ headers: array&#xa;+ data: array&#xa;+ pagination: bool&#xa;+ sortable: bool&#xa;&#xa;+ addHeader()&#xa;+ rows(data)&#xa;+ removeRow(id)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontFamily=Courier New;fontSize=11;opacity=80;" parent="1" vertex="1">
                    <mxGeometry x="790" y="340" width="200" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="arrow_table" value="" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;elbow=vertical;" parent="1" source="table" target="abstract_comp" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="uploader_comp" value="UploaderBuilder&#xa;&#xa;+ allowedTypes: array&#xa;+ maxFiles: int&#xa;+ maxSize: int&#xa;+ aspect: string&#xa;+ existingFile: string&#xa;&#xa;+ getTempId()&#xa;+ getTempIds()&#xa;+ confirm()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontFamily=Courier New;fontSize=11;opacity=80;" parent="1" vertex="1">
                    <mxGeometry x="100" y="340" width="200" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="arrow_uploader" value="" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;elbow=vertical;" parent="1" source="uploader_comp" target="abstract_comp" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="label" value="LabelBuilder&#xa;&#xa;+ text: string&#xa;+ style: LabelStyle&#xa;+ fontSize: int&#xa;+ fontWeight: string&#xa;&#xa;+ color(hex)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontFamily=Courier New;fontSize=11;opacity=80;" parent="1" vertex="1">
                    <mxGeometry x="330" y="340" width="200" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="arrow_label" value="" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=0;elbow=vertical;" parent="1" source="label" target="abstract_comp" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="select" value="SelectBuilder&#xa;&#xa;+ options: array&#xa;+ selected: string&#xa;+ multiple: bool&#xa;+ searchable: bool&#xa;&#xa;+ addOption()&#xa;+ clearSelection()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontFamily=Courier New;fontSize=11;opacity=80;" parent="1" vertex="1">
                    <mxGeometry x="330" y="520" width="200" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="modal" value="ModalBuilder&#xa;&#xa;+ title: string&#xa;+ type: DialogType&#xa;+ message: string&#xa;+ confirmAction: string&#xa;+ cancelAction: string&#xa;&#xa;+ open()&#xa;+ close()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;verticalAlign=top;spacingLeft=10;fontFamily=Courier New;fontSize=11;opacity=80;" parent="1" vertex="1">
                    <mxGeometry x="560" y="520" width="200" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="legend" value="16+ componentes implementados:&#xa;Button, Input, Label, Select, Checkbox, Table,&#xa;Uploader, Modal, Card, Form, MenuDropdown, etc." style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=center;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;fontColor=#333333;spacingTop=10;arcSize=5;spacingLeft=10;spacingRight=10;" parent="1" vertex="1">
                    <mxGeometry x="799" y="120" width="191" height="130" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram name="4. ButtonDemo - Flujo Real" id="events">
        <mxGraphModel dx="615" dy="674" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1600" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title_main" value="FLUJO COMPLETO DE EVENTOS - ButtonDemoService" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=18;fontStyle=1;arcSize=5;" parent="1" vertex="1">
                    <mxGeometry x="690" y="20" width="550" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="col_front" value="FRONTEND&#xa;(ui-renderer.js)" style="text;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="100" y="80" width="200" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="col_middleware" value="MIDDLEWARE&#xa;(PrepareUIContext)" style="text;html=1;strokeColor=#9673a6;fillColor=#e1d5e7;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="360" y="80" width="220" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="col_controller" value="CONTROLLER&#xa;(UIEventController)" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="640" y="80" width="200" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="col_abstract" value="AbstractUIService" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="900" y="80" width="250" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="col_buttondemo" value="ButtonDemoService" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1210" y="80" width="200" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="col_storage" value="STORAGE&#xa;(localStorage)" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1470" y="80" width="180" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="s1" value="1ï¸âƒ£ Usuario hace CLICK en botÃ³n" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;align=center;" parent="1" vertex="1">
                    <mxGeometry x="100" y="150" width="200" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="s2" value="2ï¸âƒ£ sendEventToBackend()&#xa;Â· component_id: 98954672&#xa;Â· action: &#39;toggle_label&#39;&#xa;Â· params: []" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="100" y="220" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="a1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="s1" target="s2" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s3" value="3ï¸âƒ£ localStorage.getItem(&#39;usim&#39;)&#xa;Â· Obtiene storage encriptado&#xa;Â· Length: 424 bytes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="1470" y="220" width="180" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="a2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;dashed=1;" parent="1" source="s2" target="s3" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s4" value="4ï¸âƒ£ POST /api/ui-event&lt;br&gt;Headers:&lt;br&gt;  X-USIM-Storage: eyJpdiI6...&lt;br&gt;Body: {&lt;br&gt;&amp;nbsp; component_id, action, params&lt;br&gt;}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="100" y="330" width="200" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="a3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#6c8ebf;" parent="1" source="s2" target="s4" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s5" value="5ï¸âƒ£ decryptUsimStorage()&lt;br&gt;Â· decrypt(header) con APP_KEY&lt;br&gt;Â· Resultado: {&lt;br&gt;&amp;nbsp; &amp;nbsp; store_token,&lt;br&gt;&amp;nbsp; &amp;nbsp; store_password,&lt;br&gt;&amp;nbsp; &amp;nbsp; store_email&lt;br&gt;  }" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="360" y="320" width="220" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="a4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#9673a6;" parent="1" source="s4" target="s5" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s6" value="6ï¸âƒ£ $request-&amp;gt;merge([&#39;storage&#39; =&amp;gt; ...])&#xa;Â· Inyecta storage desencriptado&#xa;Â· Configura Bearer Token" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="360" y="470" width="220" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="a5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="s5" target="s6" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s7" value="7ï¸âƒ£ handleEvent()&#xa;Â· Validar request&#xa;Â· Resolver servicio:&#xa;  UIIdGenerator::getContextFromId()&#xa;  â†’ ButtonDemoService" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="640" y="320" width="200" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="a6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#d6b656;" parent="1" source="s6" target="s7" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="610" y="510"/>
                            <mxPoint x="610" y="370"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="s8" value="8ï¸âƒ£ app(ButtonDemoService::class)&lt;br&gt;&lt;br&gt;Â· Instancia servicio vÃ­a&lt;br&gt;&amp;nbsp; Container DI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="640" y="460" width="200" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="a7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="s7" target="s8" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s9" value="9ï¸âƒ£ actionToMethodName()&lt;br&gt;&lt;br&gt;&#39;toggle_label&#39; â†’ &#39;onToggleLabel&#39;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="640" y="560" width="200" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="a8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="s8" target="s9" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s10" value="ðŸ”Ÿ initializeEventContext()&#xa;Â· Obtiene UI Container desde cache&#xa;Â· Captura oldUI (snapshot)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;fontStyle=0" parent="1" vertex="1">
                    <mxGeometry x="900" y="320" width="250" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="a9" value="" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#82b366;" parent="1" source="s9" target="s10" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s11" value="1ï¸âƒ£1ï¸âƒ£ injectStorageValues()&#xa;Â· Reflection sobre propiedades &#39;store_*&#39;&#xa;Â· NO hay coincidencias&#xa;  (storage no tiene store_state aÃºn)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;fontStyle=0" parent="1" vertex="1">
                    <mxGeometry x="900" y="410" width="250" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="a10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="s10" target="s11" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s12" value="1ï¸âƒ£2ï¸âƒ£ injectComponentReferences()&#xa;Â· Reflection sobre propiedades tipadas&#xa;Â· protected ButtonBuilder $btn_toggle&#xa;âœ… Inyectado: btn_toggle â†’ instance" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;align=left;spacingLeft=10;fontStyle=0;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="900" y="510" width="250" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="a11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="s11" target="s12" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1210" y="470" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="s13" value="1ï¸âƒ£3ï¸âƒ£ onToggleLabel()&#xa;Â· store_state_antes: false&#xa;Â· $this-&amp;gt;store_state = !false â†’ true&#xa;Â· store_state_despuÃ©s: true" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;align=left;spacingLeft=10;fontStyle=0;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="1210" y="320" width="200" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="a12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#82b366;" parent="1" source="s12" target="s13" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1040" y="550" as="sourcePoint"/>
                        <mxPoint x="1200" y="405" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1180" y="551"/>
                            <mxPoint x="1180" y="365"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="s14" value="1ï¸âƒ£4ï¸âƒ£ updateButtonState()&#xa;Â· if (store_state == true)&#xa;Â· $this-&amp;gt;btn_toggle&#xa;    -&amp;gt;label(&#39;Clicked! ðŸŽ‰&#39;)&#xa;Â· $this-&amp;gt;btn_toggle&#xa;    -&amp;gt;style(&#39;success&#39;)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;align=left;spacingLeft=10;fontFamily=Courier New;fontStyle=0" parent="1" vertex="1">
                    <mxGeometry x="1210" y="500" width="200" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="a13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="s13" target="s14" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s15" value="1ï¸âƒ£5ï¸âƒ£ finalizeEventContext()&lt;br&gt;Â· Captura newUI (snapshot despuÃ©s)&lt;br&gt;Â· UIDiffer::compare(oldUI, newUI)&lt;br&gt;âœ… Diff: {&lt;br&gt;&amp;nbsp; 98954672: {&lt;br&gt;&amp;nbsp; &amp;nbsp; label: &#39;Clicked! ðŸŽ‰&#39;,&lt;br&gt;&amp;nbsp; &amp;nbsp; style: &#39;success&#39;&lt;br&gt;&amp;nbsp; }&lt;br&gt;}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;align=left;spacingLeft=10;fontStyle=0;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="900" y="620" width="250" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="a14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#82b366;" parent="1" source="s14" target="s15" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1300" y="690"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="s16" value="1ï¸âƒ£6ï¸âƒ£ getStorageVariables()&#xa;Â· Reflection sobre propiedades &#39;store_*&#39;&#xa;âœ… Extrae: {store_state: true}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;fontStyle=0" parent="1" vertex="1">
                    <mxGeometry x="900" y="780" width="250" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="a15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="s15" target="s16" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s17" value="1ï¸âƒ£7ï¸âƒ£ Respuesta JSON&lt;br&gt;{&lt;br&gt;&amp;nbsp; &#39;98954672&#39;: {&lt;br&gt;&amp;nbsp; &amp;nbsp; label: &#39;Clicked! ðŸŽ‰&#39;,&lt;br&gt;&amp;nbsp; &amp;nbsp; style: &#39;success&#39;,&lt;br&gt;&amp;nbsp; &amp;nbsp; _id: 98954672,&lt;br&gt;&amp;nbsp; &amp;nbsp; type: &#39;button&#39;&lt;br&gt;&amp;nbsp; },&lt;br&gt;&amp;nbsp; storage: {&lt;br&gt;&amp;nbsp; &amp;nbsp; store_state: true&lt;br&gt;&amp;nbsp; }&lt;br&gt;}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="640" y="680" width="200" height="170" as="geometry"/>
                </mxCell>
                <mxCell id="a16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#d6b656;" parent="1" source="s16" target="s17" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="s18" value="1ï¸âƒ£8ï¸âƒ£ handleUIUpdate()&#xa;Â· Procesa diff recibido&#xa;Â· handleStorageUpdate(storage)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;align=left;spacingLeft=10;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="100" y="820" width="200" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="a17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#6c8ebf;" parent="1" source="s17" target="s18" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="470" y="765"/>
                            <mxPoint x="470" y="840"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="s19" value="1ï¸âƒ£9ï¸âƒ£ Encriptar y guardar&#xa;Â· encrypt(JSON.stringify(storage))&#xa;Â· localStorage.setItem(&#39;usim&#39;, encrypted)&#xa;Â· Nuevo length: 456 bytes&#xa;  (incluye store_state: true)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=9;align=left;spacingLeft=10;fontStyle=1;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="1470" y="790" width="210" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="a18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;dashed=1;" parent="1" source="s18" target="s19" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="890" y="880"/>
                            <mxPoint x="890" y="880"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="s20" value="2ï¸âƒ£0ï¸âƒ£ updateComponent()&#xa;Â· querySelector(&#39;[data-component-id=&quot;98954672&quot;]&#39;)&#xa;Â· element.textContent = &#39;Clicked! ðŸŽ‰&#39;&#xa;Â· element.className = &#39;ui-button success&#39;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;align=left;spacingLeft=10;fontStyle=0;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="55" y="910" width="290" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="a19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="s18" target="s20" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="final" value="âœ… BOTÃ“N ACTUALIZADO EN DOM&lt;br&gt;Â· Texto: &#39;Clicked! ðŸŽ‰&#39;&lt;br&gt;Â· Estilo: &#39;success&#39; (verde)&lt;br&gt;Â· Estado persistido" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;align=left;fontStyle=1;spacingLeft=10;" parent="1" vertex="1">
                    <mxGeometry x="100" y="1010" width="200" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="a20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#82b366;" parent="1" source="s20" target="final" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="leg1" value="ðŸ” ENCRIPTACIÃ“N: Frontend â†” Backend usa encrypt()/decrypt() con APP_KEY" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=11;spacingLeft=10;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="100" y="1110" width="490" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="leg2" value="ðŸ”Œ INYECCIÃ“N DE DEPENDENCIAS: Reflection sobre propiedades protegidas tipadas" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=11;spacingLeft=10;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="100" y="1150" width="490" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="leg3" value="ðŸ” DIFFING: Solo cambios se transmiten (label + style), no UI completa" style="text;html=1;strokeColor=#9673a6;fillColor=#e1d5e7;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=11;spacingLeft=10;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="100" y="1190" width="490" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="leg4" value="â±ï¸ LATENCIA TOTAL MEDIDA: ~80-200ms (round-trip completo)" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=11;spacingLeft=10;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="100" y="1230" width="490" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="note2nd" value="ðŸ“ SEGUNDO CLICK:&#xa;Â· Storage ahora incluye {store_state: true} (456 bytes encriptado)&#xa;Â· injectStorageValues() inyecta store_state=true en propiedad âœ…&#xa;Â· onToggleLabel() invierte: true â†’ false&#xa;Â· Diff: {label: &#39;Click Me!&#39;, style: &#39;primary&#39;}&#xa;Â· Storage actualizado: {store_state: false} (424 bytes de nuevo)" style="text;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=12;spacingLeft=10;spacingTop=10;" parent="1" vertex="1">
                    <mxGeometry x="800" y="1110" width="550" height="150" as="geometry"/>
                </mxCell>
                <mxCell id="note_diff" value="âš ï¸ IMPORTANTE: Container (98954417) NO estÃ¡ en el diff.&#xa;Solo el botÃ³n modificado (98954672) se transmite. âœ… OptimizaciÃ³n!" style="text;html=1;strokeColor=#d79b00;fillColor=#ffe6cc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=8;spacingLeft=10;spacingTop=10;fontStyle=1;fontFamily=Courier New;spacingRight=10;" parent="1" vertex="1">
                    <mxGeometry x="640" y="930" width="200" height="80" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>
